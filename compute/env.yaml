# compute/env.yaml
# -----------------------------------------------------------------------------
# Purpose: Non-secret service metadata for the Compute service.
# Commit this file to the repo. Do NOT place secrets here.
# Secrets and runtime env vars belong in: compute/env.run.yml
# -----------------------------------------------------------------------------

APP_NAME: "GoldMIND Compute"
SERVICE_NAME: "goldmind-compute"
ENV: "prod"

# ---- Versioning (CI fills these at build time if desired) -------------------
# Use semantic versioning for releases (e.g., v1.2.3). CI can overwrite these.
APP_VERSION: "v1.0.0"
GIT_SHA: ""            # CI injects short SHA (e.g., via Cloud Build substitutions)
BUILD_NUMBER: ""       # Optional CI build number/tag

# ---- GCP / Deployment metadata (non-secret) ---------------------------------
PROJECT_ID: "goldmind-api"     # Your GCP project id from logs
REGION: "us-central1"
CLOUD_RUN_SERVICE: "goldmind-compute"

# ---- Container build hints (non-binding; helpers/scripts may read these) ----
BUILD:
  CONTEXT: "."                 # Docker build context
  DOCKERFILE: "compute/Dockerfile"
  TARGET: "runtime"            # If your Dockerfile uses multi-stage; else leave as ""
  IMAGE_NAME: "goldmind-compute"

# ---- Public routes exposed by Compute (for smoke tests & docs) --------------
ROUTES:
  HEALTH: "/health"
  PREDICT: "/predict"
  VERSION: "/version"

# ---- Model conventions (paths/filenames only; no secrets) -------------------
MODEL:
  MOUNT_PATH: "/app/models"
  EXPECTED_FILENAME: "production_goldmind_v1.h5"

# ---- Observability (non-secret identifiers only) ----------------------------
OBS:
  LOG_LEVEL_DEFAULT: "INFO"
  SENTRY_ENABLED: true         # DSN lives in env.run.yml

# ---- Notes ------------------------------------------------------------------
# - Do not add INTERNAL_SHARED_SECRET, API keys, or CORS lists here.
# - Cloud Build/GitHub Actions can read this file to populate substitutions,
#   labels, or image tags, but must source secrets from env.run.yml or Secret Manager.
# - Keep SERVICE_NAME in sync with your Cloud Run service.
