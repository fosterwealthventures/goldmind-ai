# === Identity / runtime ===
ENV: "prod"
SERVICE_NAME: "goldmind-compute"

# === Security: API <-> Compute trust ===
# Must exactly match the API service's secret. Use a long, random string.
INTERNAL_SHARED_SECRET: "REPLACE_WITH_LONG_RANDOM_SECRET"

# === CORS ===
# If your frontend ever calls Compute directly (fallback), keep these.
# If Compute is strictly private (only API calls it), you can set CORS_ENABLE=false and skip origins.
CORS_ENABLE: "true"
CORS_ALLOW_ORIGINS: "https://fwvgoldmindai.com,https://www.fwvgoldmindai.com,https://app.fwvgoldmindai.com,https://admin.fwvgoldmindai.com"
CORS_ALLOW_METHODS: "GET,POST,OPTIONS"
CORS_ALLOW_HEADERS: "Accept,Content-Type,Authorization,X-Requested-With,X-Internal-Secret"
CORS_ALLOW_CREDENTIALS: "false"
CORS_MAX_AGE: "86400"

# === Observability ===
LOG_LEVEL: "INFO"
SENTRY_DSN: "https://4d75d0671a7df10f56c61f3bf2715a81@o4509472997638144.ingest.us.sentry.io/4509473041612800"

# === Feature flags / routes (turn on only what Compute actually serves) ===
HEALTH_ENABLE: "true"
PREDICT_ENABLE: "true"          # Computeâ€™s primary role
BIAS_ENABLE: "false"            # Usually handled by API layer; flip to true if Compute provides it
SETTINGS_ENABLE: "false"
VERSION_ENABLE: "true"

# === Model loading (Compute usually owns the heavy model) ===
MODEL_PATH: "/app/lstm_models/production_goldmind_v1.h5"
SCALER_PATH: "/app/lstm_models/scalers.joblib"
SEQ_LEN: "60"
FEATURES: "close"
# (optional) MODEL_SHA256: "<sha256 of the .h5>"
MODEL_SHA256: "a79ef44cdc849e4e5422501c87b82a60e10af54a208ae81066f5f98251d95ef44"  # optional

GUNICORN_WORKERS: "1"
GUNICORN_THREADS: "8"
GUNICORN_TIMEOUT: "240"
TF_CPP_MIN_LOG_LEVEL: "2"

# === Engine / performance knobs ===
INFERENCE_TIMEOUT_MS: "10000"     # end-to-end inference guardrail
INFERENCE_BATCH_SIZE: "1"         # if you implement micro-batching, tune here
NUM_THREADS: "2"                  # for TF/NumPy (OS env in entrypoint too, if needed)
TF_CPP_MIN_LOG_LEVEL: "2"         # 0=all, 2=warnings, 3=errors

# === Rate limiting (optional; useful if Compute is exposed publicly) ===
RATE_LIMIT_ENABLED: "true"
RATE_LIMIT_WINDOW_SECONDS: "60"
RATE_LIMIT_MAX_REQUESTS: "120"
REDIS_URL: ""                     # fill if you actually enforce centralized rate-limits

# === Misc hardening ===
JSONIFY_PRETTYPRINT: "false"
DISABLE_SERVER_SIGNATURE: "true"
