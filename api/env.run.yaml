# api/env.run.yml
# -----------------------------------------------------------------------------
# Runtime environment variables for the GoldMIND API service (prod).
# Inject these into Cloud Run at deploy time.
# -----------------------------------------------------------------------------

ENV: "prod"
SERVICE_NAME: "goldmind-api"
PORT: "8080"

# === Public base URLs ===
API_PUBLIC_BASE_URL: "https://api.fwvgoldmindai.com"
COMPUTE_URL: "https://compute.fwvgoldmindai.com"

# === Security ===
# Must match compute/env.run.yml
INTERNAL_SHARED_SECRET: "REPLACE_WITH_LONG_RANDOM_SECRET"

# === CORS ===
CORS_ENABLE: "true"
CORS_ALLOW_ORIGINS: "https://fwvgoldmindai.com,https://www.fwvgoldmindai.com,https://app.fwvgoldmindai.com,https://admin.fwvgoldmindai.com"
CORS_ALLOW_METHODS: "GET,POST,OPTIONS"
CORS_ALLOW_HEADERS: "Accept,Content-Type,Authorization,X-Requested-With,X-Internal-Secret"
CORS_ALLOW_CREDENTIALS: "false"
CORS_MAX_AGE: "86400"

# === Rate limiting (tune as needed) ===
RATE_LIMIT_ENABLED: "true"
RATE_LIMIT_WINDOW_SECONDS: "60"
RATE_LIMIT_MAX_REQUESTS: "120"
REDIS_URL: ""   # leave blank if not using Redis

# === Observability ===
LOG_LEVEL: "INFO"
SENTRY_DSN: "https://4d75d0671a7df10f56c61f3bf2715a81@o4509472997638144.ingest.us.sentry.io/4509473041612800"

# === Features / routes (API exposes more than compute) ===
HEALTH_ENABLE: "true"
PREDICT_ENABLE: "true"
BIAS_ENABLE: "true"
SETTINGS_ENABLE: "true"
VERSION_ENABLE: "true"

# === API <-> Compute timeout/retry behavior ===
COMPUTE_TIMEOUT_MS: "8000"
COMPUTE_CONNECT_TIMEOUT_MS: "2000"
COMPUTE_RETRY_ATTEMPTS: "2"

# === Misc hardening ===
JSONIFY_PRETTYPRINT: "false"
DISABLE_SERVER_SIGNATURE: "true"
